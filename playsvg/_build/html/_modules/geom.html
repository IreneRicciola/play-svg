

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>geom &mdash; pLAySVG 0.3.1 documentation</title>
    
    <link rel="stylesheet" href="../_static/default.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '0.3.1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="top" title="pLAySVG 0.3.1 documentation" href="../index.html" />
    <link rel="up" title="Module code" href="index.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li><a href="../index.html">pLAySVG 0.3.1 documentation</a> &raquo;</li>
          <li><a href="index.html" accesskey="U">Module code</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <h1>Source code for geom</h1><div class="highlight"><pre>
<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">This module contains all classes and methods used for geometric calculations. </span>
<span class="sd">pLAySVG has one unconventional term it uses in its geometric calculations: &#39;angal&#39;.   An angal is a fractional representation of an angle such that (using the clock metaphor) 0 is at 12:00, 0.25 is at 3:00, 0.5 is at 6:00, and 0.75 is at 9:00.  An angal is always in range \|0 - 1( as whole number portions of numbers are truncated in any calculations using them.</span>
<span class="sd">&quot;&quot;&quot;</span>

<span class="kn">import</span> <span class="nn">math</span>
<span class="kn">import</span> <span class="nn">numbthy</span>
<span class="c">#***from geosolver.intersections import *</span>
<span class="c">#***from geosolver.vector import *</span>
<span class="c">#TODO: remove geosolver dependencies and restore circle-circle intersection</span>
<span class="c">#TODO: enable variable decimal precision in aNum</span>
<span class="c">#TODO: move generateStarDict to a script </span>
<span class="c">#TODO: search for angal calculations used, use one of similar getAngalBetween and angalBetween methods</span>

<span class="n">tewpi</span> <span class="o">=</span> <span class="n">math</span><span class="o">.</span><span class="n">pi</span><span class="o">*</span><span class="mi">2</span>
<span class="n">phi</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span> <span class="o">+</span> <span class="n">math</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="mi">5</span><span class="p">))</span> <span class="o">/</span> <span class="mf">2.0</span>
<span class="kn">from</span> <span class="nn">copy</span> <span class="kn">import</span> <span class="o">*</span>

<div class="viewcode-block" id="Point"><a class="viewcode-back" href="../geom.html#geom.Point">[docs]</a><span class="k">class</span> <span class="nc">Point</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;A 2D cartesian point&quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">xval</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">yval</span><span class="o">=</span><span class="mi">0</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;constructor takes x and y values&quot;&quot;&quot;</span>     
        <span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">xval</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">y</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">yval</span><span class="p">)</span>
    
<div class="viewcode-block" id="Point.polerInit"><a class="viewcode-back" href="../geom.html#geom.Point.polerInit">[docs]</a>    <span class="k">def</span> <span class="nf">polerInit</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">radius</span><span class="p">,</span><span class="n">angal</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;initialize the x and y values based upon radial co-ordinates, with the angal representing the angle as in Angal class &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">=</span> <span class="n">math</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">angal</span><span class="o">*</span><span class="n">tewpi</span><span class="p">)</span><span class="o">*</span><span class="n">radius</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">y</span> <span class="o">=</span> <span class="n">math</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">angal</span><span class="o">*</span><span class="n">tewpi</span><span class="p">)</span><span class="o">*</span><span class="n">radius</span>
        <span class="k">return</span> <span class="bp">self</span></div>
    <span class="k">def</span> <span class="nf">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;outputs x,y for use in SVG code.  Fixed width float outputed as in aNum() &quot;&quot;&quot;</span>
        <span class="k">return</span>  <span class="n">aNum</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">x</span><span class="p">)</span><span class="o">+</span><span class="s">&quot;,&quot;</span><span class="o">+</span><span class="n">aNum</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">y</span><span class="p">)</span>  
<div class="viewcode-block" id="Point.strOnPlane"><a class="viewcode-back" href="../geom.html#geom.Point.strOnPlane">[docs]</a>    <span class="k">def</span> <span class="nf">strOnPlane</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span> 
        <span class="sd">&quot;&quot;&quot;used to output 3D points for OpenSCAD&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="s">&quot;[&quot;</span> <span class="o">+</span> <span class="n">aNum</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">x</span><span class="p">)</span><span class="o">+</span><span class="s">&quot;,&quot;</span><span class="o">+</span><span class="n">aNum</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">y</span><span class="p">)</span> <span class="o">+</span> <span class="s">&quot;,0]&quot;</span></div>
<div class="viewcode-block" id="Point.strForPoly"><a class="viewcode-back" href="../geom.html#geom.Point.strForPoly">[docs]</a>    <span class="k">def</span> <span class="nf">strForPoly</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span> 
        <span class="sd">&quot;&quot;&quot;used to output 2D points for OpenSCAD&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="s">&quot;[&quot;</span> <span class="o">+</span> <span class="n">aNum</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">x</span><span class="p">)</span><span class="o">+</span><span class="s">&quot;,&quot;</span><span class="o">+</span><span class="n">aNum</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">y</span><span class="p">)</span> <span class="o">+</span> <span class="s">&quot;]&quot;</span></div>
    <span class="k">def</span> <span class="nf">__unicode__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">unicode</span><span class="p">(</span><span class="n">aNum</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">x</span><span class="p">))</span> <span class="o">+</span> <span class="s">u&#39;,&#39;</span><span class="o">+</span> <span class="nb">unicode</span><span class="p">(</span><span class="n">aNum</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">y</span><span class="p">))</span> 
    <span class="k">def</span> <span class="nf">__add__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">point</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;returns the addition of 2 points as in vector geometry&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Point</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">+</span> <span class="n">point</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">y</span> <span class="o">+</span> <span class="n">point</span><span class="o">.</span><span class="n">y</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">__sub__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">point</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;returns the subtraction of 2 points as in vector geometry&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Point</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">-</span> <span class="n">point</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">y</span> <span class="o">-</span> <span class="n">point</span><span class="o">.</span><span class="n">y</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">__mul__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mult</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;returns a float, dot product of 2 points as vectors&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">x</span><span class="o">*</span><span class="n">mult</span><span class="o">.</span><span class="n">x</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">y</span><span class="o">*</span><span class="n">mult</span><span class="o">.</span><span class="n">y</span>
    <span class="k">def</span> <span class="nf">__div__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">divisor</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;returns Point(self.x/divisor, self.y/divisor)&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Point</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">x</span><span class="o">/</span><span class="n">divisor</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">y</span><span class="o">/</span><span class="n">divisor</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">__cmp__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">other</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">cmp</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">convertToPoler</span><span class="p">()</span><span class="o">.</span><span class="n">getT</span><span class="p">(),</span> <span class="n">other</span><span class="o">.</span><span class="n">convertToPoler</span><span class="p">()</span><span class="o">.</span><span class="n">getT</span><span class="p">())</span>
<div class="viewcode-block" id="Point.getMultiple"><a class="viewcode-back" href="../geom.html#geom.Point.getMultiple">[docs]</a>    <span class="k">def</span> <span class="nf">getMultiple</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">scalar</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;returns Point(self.x*scalar, self.y*scalar)&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Point</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">x</span><span class="o">*</span><span class="n">scalar</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">y</span><span class="o">*</span><span class="n">scalar</span><span class="p">)</span></div>
<div class="viewcode-block" id="Point.convertToPoler"><a class="viewcode-back" href="../geom.html#geom.Point.convertToPoler">[docs]</a>    <span class="k">def</span> <span class="nf">convertToPoler</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;returns a pair (distance from center, angal)  &quot;&quot;&quot;</span>
        <span class="n">existingAngal</span> <span class="o">=</span> <span class="n">Angal</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
        <span class="n">existingAngal</span><span class="o">.</span><span class="n">setByRadianValue</span><span class="p">(</span><span class="n">math</span><span class="o">.</span><span class="n">atan2</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">y</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">x</span><span class="p">))</span>
        <span class="c">#return PolerPoint(math.sqrt(self.x**2+ self.y**2), getattr(existingAngal, &quot;value&quot;))</span>
        <span class="k">return</span> <span class="p">(</span><span class="n">math</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">x</span><span class="o">**</span><span class="mi">2</span><span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">y</span><span class="o">**</span><span class="mi">2</span><span class="p">),</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">existingAngal</span><span class="p">,</span> <span class="s">&quot;value&quot;</span><span class="p">))</span></div>
<div class="viewcode-block" id="Point.unitVector"><a class="viewcode-back" href="../geom.html#geom.Point.unitVector">[docs]</a>    <span class="k">def</span> <span class="nf">unitVector</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;returns unit vector Point&quot;&quot;&quot;</span> 
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">scale</span><span class="p">(</span><span class="mi">1</span><span class="o">/</span><span class="bp">self</span><span class="o">.</span><span class="n">vectorLength</span><span class="p">())</span></div>
<div class="viewcode-block" id="Point.vectorLength"><a class="viewcode-back" href="../geom.html#geom.Point.vectorLength">[docs]</a>    <span class="k">def</span> <span class="nf">vectorLength</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;returns length of point as vector&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">distanceBetween</span><span class="p">(</span><span class="n">Point</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">),</span> <span class="bp">self</span><span class="p">)</span></div>
    <span class="k">def</span> <span class="nf">scale</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mult</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">Point</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">x</span><span class="o">*</span><span class="n">mult</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">y</span><span class="o">*</span><span class="n">mult</span><span class="p">)</span>
    </div>
<span class="sd">&quot;&quot;&quot;    </span>
<span class="sd"># #FIXME: use Angal or lose it</span>
<span class="sd"># class Angal:</span>
<span class="sd">#    </span>
<span class="sd">#     an Angal is a fractional representation  of an angle such that (using the clock metaphor) 0 is at 12:00,</span>
<span class="sd">#     0.25 is at 3:00, 0.5 is at 6:00, and 0.75 is at 9:00.  Angal is always in range |0 - 1( as whole number portions </span>
<span class="sd">#    of numbers are truncated in constructors (class DEPRECATED, concept of &#39;angal&#39; preserved elsewhere in documentation)</span>
<span class="sd">#    &quot;&quot;&quot;</span> 
<span class="c">#     def __init__(self,val):</span>
<span class="c">#         if val &gt;=0:</span>
<span class="c">#             self.value = val - math.floor(val)</span>
<span class="c">#         else:</span>
<span class="c">#             self.value = val - math.ceil(val)</span>
<span class="c">#     def setByRadianValue(self,rad):</span>
<span class="c">#         #wraparound effect for radian values over tewpi</span>
<span class="c">#         if rad &gt;= tewpi:</span>
<span class="c">#             rad = rad - (rad//tewpi)*tewpi </span>
<span class="c">#         #fractionify rad value    </span>
<span class="c">#         value = rad / tewpi</span>
<span class="c">#         #change direction of increase from counterclockwise to clockwise</span>
<span class="c">#         value = 1-value</span>
<span class="c">#         #change starting point 0 from position of 3:00 to 12:00</span>
<span class="c">#         value = value + 0.25 - value//1</span>
<span class="c">#         self.value = value</span>
<span class="c">#     def reflectionInAngle(self, reflector):</span>
<span class="c">#         &quot;&quot;&quot;</span>
<span class="c">#         returns an Angal such that it is the reflection of the current value in a line </span>
<span class="c">#         drawn through reflector and the middle of a circle</span>
<span class="c">#         &quot;&quot;&quot;</span>
<span class="c">#         difference = self.value - reflector</span>

<span class="c">#DEPRICATED, use Point polarInit()</span>
<span class="k">class</span> <span class="nc">PolerPoint</span><span class="p">:</span>
<span class="c">#PolerPoints are almost identical to points in the polar co-ordinate system, except they have slightly different conventions (hence the spelling).  Poler points are represented by two values, theyda (t) and radius(r).</span>
    <span class="n">r</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="c">#r represents the radius as in polar co-ordinates</span>
    <span class="n">t</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="c">#theyda represents the angle as theta does in polar co-ordinates. theyda differs in that it&#39;s range is [0,1); it represents the percent of the circle traversed.  A theta of 0 is at &quot;12:00&quot; , and theyda increases as the angle moves clockwise.</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">rval</span><span class="p">,</span> <span class="n">tval</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">r</span> <span class="o">=</span> <span class="n">rval</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">t</span> <span class="o">=</span> <span class="n">tval</span> <span class="o">-</span> <span class="n">math</span><span class="o">.</span><span class="n">floor</span><span class="p">(</span><span class="n">tval</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">getR</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">r</span>
    <span class="k">def</span> <span class="nf">getT</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">t</span>
    <span class="k">def</span> <span class="nf">setR</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">rval</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">r</span> <span class="o">=</span> <span class="n">rval</span>
    <span class="k">def</span> <span class="nf">setT</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">tval</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">t</span> <span class="o">=</span> <span class="n">tval</span> <span class="o">-</span> <span class="n">math</span><span class="o">.</span><span class="n">floor</span><span class="p">(</span><span class="n">tval</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">getString</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">x</span><span class="p">)</span><span class="o">+</span><span class="s">&quot;,&quot;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">y</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">__add__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">point</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">PolerPoint</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">r</span> <span class="o">+</span> <span class="n">point</span><span class="o">.</span><span class="n">getR</span><span class="p">(),</span> <span class="bp">self</span><span class="o">.</span><span class="n">t</span> <span class="o">+</span> <span class="n">point</span><span class="o">.</span><span class="n">getT</span><span class="p">())</span>
    <span class="k">def</span> <span class="nf">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">aNum</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">r</span><span class="p">)</span> <span class="o">+</span> <span class="s">&quot;r,&quot;</span><span class="o">+</span><span class="n">aNum</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">t</span><span class="p">)</span> <span class="o">+</span><span class="s">&quot;theyda&quot;</span>
    <span class="k">def</span> <span class="nf">convertToCartesian</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">Point</span><span class="p">(</span><span class="n">math</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">t</span><span class="o">*</span><span class="n">tewpi</span><span class="p">)</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">r</span><span class="p">,</span><span class="n">math</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">t</span><span class="o">*</span><span class="n">tewpi</span><span class="p">)</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">r</span> <span class="p">)</span> 
    <span class="k">def</span> <span class="nf">vertFlip</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">t</span> <span class="o">=</span> <span class="n">vertFlipThayda</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">t</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">horizFlip</span><span class="p">():</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">t</span> <span class="o">=</span> <span class="n">horizFlipThayda</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">t</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">convertPolarToPoler</span><span class="p">(</span><span class="n">angleNum</span><span class="p">):</span>
    <span class="n">retVal</span> <span class="o">=</span> <span class="n">angleNum</span> <span class="o">+</span> <span class="mf">0.25</span>
    <span class="k">if</span> <span class="n">retVal</span> <span class="o">&gt;</span> <span class="mi">1</span> <span class="p">:</span>
        <span class="n">retVal</span> <span class="o">-=</span> <span class="mi">1</span>

    <span class="n">retVal</span> <span class="o">=</span> <span class="n">horizFlipThayda</span><span class="p">(</span><span class="n">retVal</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">retVal</span>

<div class="viewcode-block" id="getMidpoint"><a class="viewcode-back" href="../geom.html#geom.getMidpoint">[docs]</a><span class="k">def</span> <span class="nf">getMidpoint</span><span class="p">(</span><span class="n">pointA</span><span class="p">,</span> <span class="n">pointB</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;returns midpoint between pointA and pointB&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">Point</span><span class="p">(</span> <span class="nb">float</span><span class="p">(</span><span class="n">pointA</span><span class="o">.</span><span class="n">x</span><span class="o">+</span><span class="n">pointB</span><span class="o">.</span><span class="n">x</span><span class="p">)</span><span class="o">/</span><span class="mi">2</span><span class="p">,</span> <span class="nb">float</span><span class="p">(</span><span class="n">pointA</span><span class="o">.</span><span class="n">y</span><span class="o">+</span> <span class="n">pointB</span><span class="o">.</span><span class="n">y</span><span class="p">)</span><span class="o">/</span><span class="mi">2</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="distanceBetween"><a class="viewcode-back" href="../geom.html#geom.distanceBetween">[docs]</a><span class="k">def</span> <span class="nf">distanceBetween</span><span class="p">(</span><span class="n">pointA</span><span class="p">,</span> <span class="n">pointB</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;returns distance between pointA and pointB&quot;&quot;&quot;</span>
    <span class="n">asquared</span> <span class="o">=</span> <span class="n">math</span><span class="o">.</span><span class="n">fabs</span><span class="p">(</span><span class="n">pointA</span><span class="o">.</span><span class="n">x</span> <span class="o">-</span> <span class="n">pointB</span><span class="o">.</span><span class="n">x</span><span class="p">)</span><span class="o">**</span><span class="mi">2</span>
    <span class="n">bsquared</span> <span class="o">=</span> <span class="n">math</span><span class="o">.</span><span class="n">fabs</span><span class="p">(</span><span class="n">pointA</span><span class="o">.</span><span class="n">y</span> <span class="o">-</span> <span class="n">pointB</span><span class="o">.</span><span class="n">y</span><span class="p">)</span><span class="o">**</span><span class="mi">2</span>
    <span class="k">return</span> <span class="n">math</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="n">asquared</span> <span class="o">+</span> <span class="n">bsquared</span><span class="p">)</span>

<span class="c">#FIXME: used ?    </span></div>
<div class="viewcode-block" id="distanceBetweenPoints"><a class="viewcode-back" href="../geom.html#geom.distanceBetweenPoints">[docs]</a><span class="k">def</span> <span class="nf">distanceBetweenPoints</span><span class="p">(</span><span class="n">points</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;returns the sum of succesive distances between elements in the array points&quot;&quot;&quot;</span>
    <span class="n">totalDistance</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">points</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">):</span>
        <span class="n">totalDistance</span> <span class="o">+=</span> <span class="n">distanceBetween</span><span class="p">(</span><span class="n">points</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">points</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">])</span>
    <span class="k">return</span> <span class="n">totalDistance</span>    
    </div>
<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">def intersectCircleCircle(c1c,c1r,c2c,c2r):</span>
<span class="sd">    intersections = cc_int(c1c.getVector(), c1r, c2c.getVector(), c2r) </span>
<span class="sd">    intersections = [Point(i[0], i[1]) for i in intersections]</span>
<span class="sd">    return intersections</span>
<span class="sd">&quot;&quot;&quot;</span>

<div class="viewcode-block" id="getDiscreteCubicBezier"><a class="viewcode-back" href="../geom.html#geom.getDiscreteCubicBezier">[docs]</a><span class="k">def</span> <span class="nf">getDiscreteCubicBezier</span><span class="p">(</span><span class="n">pointA</span><span class="p">,</span> <span class="n">pointB</span><span class="p">,</span> <span class="n">pointC</span><span class="p">,</span> <span class="n">pointD</span><span class="p">,</span> <span class="n">n</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot; </span>
<span class="sd">    Accepts 4 point objects representing a cubic bezier curve as described on wikipedia and a number of points n and returns an array of n CartesianPoints equally spaced along that curve</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">points</span> <span class="o">=</span> <span class="p">[</span><span class="n">pointA</span><span class="p">]</span>
    <span class="n">iters</span> <span class="o">=</span> <span class="n">n</span><span class="o">-</span><span class="mi">2</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="n">iters</span><span class="p">):</span>
        <span class="n">t</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">i</span><span class="p">)</span><span class="o">/</span><span class="n">iters</span>
        <span class="n">points</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">pointA</span><span class="o">.</span><span class="n">getMultiple</span><span class="p">((</span><span class="mi">1</span><span class="o">-</span><span class="n">t</span><span class="p">)</span><span class="o">**</span><span class="mi">3</span><span class="p">)</span> <span class="o">+</span> <span class="n">pointB</span><span class="o">.</span><span class="n">getMultiple</span><span class="p">(</span><span class="mi">3</span><span class="o">*</span><span class="n">t</span><span class="o">*</span><span class="p">(</span><span class="mi">1</span><span class="o">-</span><span class="n">t</span><span class="p">)</span><span class="o">**</span><span class="mi">2</span><span class="p">)</span> <span class="o">+</span> <span class="n">pointC</span><span class="o">.</span><span class="n">getMultiple</span><span class="p">(</span><span class="mi">3</span><span class="o">*</span><span class="n">t</span><span class="o">**</span><span class="mi">2</span><span class="o">*</span><span class="p">(</span><span class="mi">1</span><span class="o">-</span><span class="n">t</span><span class="p">))</span> <span class="o">+</span> <span class="n">pointD</span><span class="o">.</span><span class="n">getMultiple</span><span class="p">(</span><span class="n">t</span><span class="o">**</span><span class="mi">3</span><span class="p">))</span>    
    
    <span class="n">points</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">pointD</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">points</span>
    </div>
<div class="viewcode-block" id="getDiscreteQuadradicBezier"><a class="viewcode-back" href="../geom.html#geom.getDiscreteQuadradicBezier">[docs]</a><span class="k">def</span> <span class="nf">getDiscreteQuadradicBezier</span><span class="p">(</span><span class="n">pointA</span><span class="p">,</span> <span class="n">pointB</span><span class="p">,</span> <span class="n">pointC</span><span class="p">,</span> <span class="n">n</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot; </span>
<span class="sd">    Accepts 4 point objects representing a quadradic bezier curve as described on wikipedia and a number of points n and returns an array of n CartesianPoints equally spaced along that curve</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">points</span> <span class="o">=</span> <span class="p">[</span><span class="n">pointA</span><span class="p">]</span>
    <span class="n">iters</span> <span class="o">=</span> <span class="n">n</span><span class="o">-</span><span class="mi">2</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="n">iters</span><span class="p">):</span>
        <span class="n">t</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">i</span><span class="p">)</span><span class="o">/</span><span class="n">iters</span>
        <span class="n">points</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">pointA</span><span class="o">.</span><span class="n">getMultiple</span><span class="p">((</span><span class="mi">1</span><span class="o">-</span><span class="n">t</span><span class="p">)</span><span class="o">**</span><span class="mi">2</span><span class="p">)</span> <span class="o">+</span> <span class="n">pointB</span><span class="o">.</span><span class="n">getMultiple</span><span class="p">(</span><span class="mi">2</span><span class="o">*</span><span class="n">t</span><span class="o">*</span><span class="p">(</span><span class="mi">1</span><span class="o">-</span><span class="n">t</span><span class="p">))</span> <span class="o">+</span> <span class="n">pointC</span><span class="o">.</span><span class="n">getMultiple</span><span class="p">(</span><span class="n">t</span><span class="o">**</span><span class="mi">2</span><span class="p">)</span> <span class="p">)</span>    
    
    <span class="n">points</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">pointC</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">points</span>
    </div>
<div class="viewcode-block" id="getLineDivisions"><a class="viewcode-back" href="../geom.html#geom.getLineDivisions">[docs]</a><span class="k">def</span> <span class="nf">getLineDivisions</span><span class="p">(</span><span class="n">pointA</span><span class="p">,</span> <span class="n">pointB</span><span class="p">,</span> <span class="n">n</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    returns an array of n points equally spaced along line AB</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">points</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">t</span> <span class="o">=</span> <span class="n">n</span> <span class="o">-</span><span class="mi">1</span>
    <span class="n">xdiff</span> <span class="o">=</span> <span class="n">math</span><span class="o">.</span><span class="n">fabs</span><span class="p">(</span><span class="n">pointA</span><span class="o">.</span><span class="n">x</span> <span class="o">-</span> <span class="n">pointB</span><span class="o">.</span><span class="n">x</span><span class="p">)</span>
    <span class="n">ydiff</span> <span class="o">=</span> <span class="n">math</span><span class="o">.</span><span class="n">fabs</span><span class="p">(</span><span class="n">pointA</span><span class="o">.</span><span class="n">y</span> <span class="o">-</span> <span class="n">pointB</span><span class="o">.</span><span class="n">y</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">pointA</span><span class="o">.</span><span class="n">x</span> <span class="o">&lt;</span> <span class="n">pointB</span><span class="o">.</span><span class="n">x</span><span class="p">:</span>
        <span class="n">axOperator</span> <span class="o">=</span> <span class="mi">1</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">axOperator</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span>
    
    <span class="k">if</span> <span class="n">pointA</span><span class="o">.</span><span class="n">y</span> <span class="o">&lt;</span> <span class="n">pointB</span><span class="o">.</span><span class="n">y</span><span class="p">:</span>
        <span class="n">ayOperator</span> <span class="o">=</span> <span class="mi">1</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">ayOperator</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span>
    
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="n">t</span><span class="p">):</span>
        <span class="n">fract</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">i</span><span class="p">)</span><span class="o">/</span><span class="n">t</span>
        <span class="n">xval</span> <span class="o">=</span> <span class="n">pointA</span><span class="o">.</span><span class="n">x</span> <span class="o">+</span>  <span class="n">axOperator</span><span class="o">*</span><span class="n">fract</span><span class="o">*</span><span class="n">xdiff</span>
        <span class="n">yval</span> <span class="o">=</span> <span class="n">pointA</span><span class="o">.</span><span class="n">y</span> <span class="o">+</span> <span class="n">ayOperator</span><span class="o">*</span><span class="n">fract</span><span class="o">*</span> <span class="n">ydiff</span>
        <span class="n">points</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">Point</span><span class="p">(</span><span class="n">xval</span><span class="p">,</span> <span class="n">yval</span><span class="p">))</span>

    <span class="n">points</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">pointB</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">points</span>
    </div>
<div class="viewcode-block" id="getLineDivision"><a class="viewcode-back" href="../geom.html#geom.getLineDivision">[docs]</a><span class="k">def</span> <span class="nf">getLineDivision</span><span class="p">(</span><span class="n">pointA</span><span class="p">,</span> <span class="n">pointB</span><span class="p">,</span> <span class="n">fract</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    returns a point that is fract percent of the distance from pointA to pointB</span>
<span class="sd">    &quot;&quot;&quot;</span>
        
    <span class="k">if</span> <span class="n">fract</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
        <span class="c">#reverse points</span>
        <span class="n">tmpPtA</span> <span class="o">=</span> <span class="n">deepcopy</span><span class="p">(</span><span class="n">pointB</span><span class="p">)</span>
        <span class="n">tmpPtB</span> <span class="o">=</span> <span class="n">deepcopy</span><span class="p">(</span><span class="n">pointA</span><span class="p">)</span>
        <span class="c">#change ratio to extend beyond line</span>
        <span class="n">theFract</span> <span class="o">=</span> <span class="n">math</span><span class="o">.</span><span class="n">fabs</span><span class="p">(</span><span class="n">fract</span><span class="p">)</span> <span class="o">+</span><span class="mi">1</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">tmpPtA</span> <span class="o">=</span> <span class="n">deepcopy</span><span class="p">(</span><span class="n">pointA</span><span class="p">)</span>
        <span class="n">tmpPtB</span> <span class="o">=</span> <span class="n">deepcopy</span><span class="p">(</span><span class="n">pointB</span><span class="p">)</span>
        <span class="n">theFract</span> <span class="o">=</span> <span class="n">fract</span>
    
    <span class="n">xdiff</span> <span class="o">=</span> <span class="n">math</span><span class="o">.</span><span class="n">fabs</span><span class="p">(</span><span class="n">pointA</span><span class="o">.</span><span class="n">x</span> <span class="o">-</span> <span class="n">pointB</span><span class="o">.</span><span class="n">x</span><span class="p">)</span>
    <span class="n">ydiff</span> <span class="o">=</span> <span class="n">math</span><span class="o">.</span><span class="n">fabs</span><span class="p">(</span><span class="n">pointA</span><span class="o">.</span><span class="n">y</span> <span class="o">-</span> <span class="n">pointB</span><span class="o">.</span><span class="n">y</span><span class="p">)</span>
    
    <span class="k">if</span> <span class="n">tmpPtA</span><span class="o">.</span><span class="n">x</span> <span class="o">&lt;</span> <span class="n">tmpPtB</span><span class="o">.</span><span class="n">x</span><span class="p">:</span> <span class="n">axOperator</span> <span class="o">=</span> <span class="mi">1</span>
    <span class="k">else</span><span class="p">:</span> <span class="n">axOperator</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span>
    
    <span class="k">if</span> <span class="n">tmpPtA</span><span class="o">.</span><span class="n">y</span> <span class="o">&lt;</span> <span class="n">tmpPtB</span><span class="o">.</span><span class="n">y</span><span class="p">:</span><span class="n">ayOperator</span> <span class="o">=</span> <span class="mi">1</span>
    <span class="k">else</span><span class="p">:</span> <span class="n">ayOperator</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span>
       
    
    <span class="k">return</span> <span class="n">Point</span><span class="p">(</span><span class="n">tmpPtA</span><span class="o">.</span><span class="n">x</span> <span class="o">+</span>  <span class="n">axOperator</span><span class="o">*</span><span class="n">theFract</span><span class="o">*</span><span class="n">xdiff</span><span class="p">,</span> <span class="n">tmpPtA</span><span class="o">.</span><span class="n">y</span> <span class="o">+</span> <span class="n">ayOperator</span><span class="o">*</span><span class="n">theFract</span><span class="o">*</span> <span class="n">ydiff</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="getLineDivisionDistance"><a class="viewcode-back" href="../geom.html#geom.getLineDivisionDistance">[docs]</a><span class="k">def</span> <span class="nf">getLineDivisionDistance</span><span class="p">(</span><span class="n">pointA</span><span class="p">,</span> <span class="n">pointB</span><span class="p">,</span> <span class="n">distance</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;get a point of specific distance along the line from pointA to pointB&quot;&quot;&quot;</span>
    <span class="n">lineLength</span> <span class="o">=</span> <span class="n">distanceBetween</span><span class="p">(</span><span class="n">pointA</span><span class="p">,</span> <span class="n">pointB</span><span class="p">)</span>
    <span class="c">#if distance &gt; lineLength:</span>
        <span class="c">#raise Exception, &quot;Requested length longer than distance between points&quot;</span>
    <span class="k">return</span> <span class="n">getLineDivision</span><span class="p">(</span><span class="n">pointA</span><span class="p">,</span> <span class="n">pointB</span><span class="p">,</span> <span class="nb">float</span><span class="p">(</span><span class="n">distance</span><span class="p">)</span><span class="o">/</span><span class="n">lineLength</span><span class="p">)</span>

</div>
<span class="k">def</span> <span class="nf">getLineDivisionsWithRatios</span><span class="p">(</span><span class="n">pointA</span><span class="p">,</span> <span class="n">pointB</span><span class="p">,</span> <span class="n">ratios</span><span class="p">):</span>
    
    <span class="n">points</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">ratios</span><span class="p">)):</span>
        <span class="n">points</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">getLineDivision</span><span class="p">(</span><span class="n">pointA</span><span class="p">,</span> <span class="n">pointB</span><span class="p">,</span> <span class="n">ratios</span><span class="p">[</span><span class="n">i</span><span class="p">]))</span>
    <span class="k">return</span> <span class="n">points</span>


<span class="k">def</span> <span class="nf">extendBendPoint</span><span class="p">(</span><span class="n">pointA</span><span class="p">,</span> <span class="n">pointB</span><span class="p">,</span>  <span class="n">length</span><span class="p">,</span> <span class="n">angle</span><span class="p">):</span>
    <span class="n">relativeB</span> <span class="o">=</span> <span class="n">pointB</span> <span class="o">-</span> <span class="n">pointA</span>
    <span class="n">bentPoint</span> <span class="o">=</span>  <span class="n">Point</span><span class="p">()</span><span class="o">.</span><span class="n">polerInit</span><span class="p">(</span><span class="n">length</span><span class="p">,</span> <span class="n">relativeB</span><span class="o">.</span><span class="n">convertToPoler</span><span class="p">()[</span><span class="mi">1</span><span class="p">]</span><span class="o">+</span><span class="n">angle</span><span class="p">)</span> <span class="o">+</span> <span class="n">pointB</span>
    <span class="k">return</span> <span class="n">bentPoint</span>

    
<div class="viewcode-block" id="reflectPointInLine"><a class="viewcode-back" href="../geom.html#geom.reflectPointInLine">[docs]</a><span class="k">def</span> <span class="nf">reflectPointInLine</span><span class="p">(</span><span class="n">point</span><span class="p">,</span> <span class="n">lineStart</span><span class="p">,</span> <span class="n">lineEnd</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Calculation as described in `mathworld Reflection entry &lt;http://mathworld.wolfram.com/Reflection.html&gt;`_</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c">#compute unit vector of line</span>
    <span class="n">lineVector</span> <span class="o">=</span> <span class="n">lineEnd</span> <span class="o">-</span> <span class="n">lineStart</span>
    <span class="n">lineVectorNorm</span> <span class="o">=</span> <span class="n">math</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="nb">float</span><span class="p">(</span><span class="n">lineVector</span><span class="o">*</span><span class="n">lineVector</span><span class="p">))</span>
    <span class="n">lineVectorUnit</span> <span class="o">=</span> <span class="n">lineVector</span><span class="o">*</span><span class="p">(</span><span class="mi">1</span><span class="o">/</span><span class="n">lineVectorNorm</span><span class="p">)</span>
    <span class="c">#print lineVectorUnit</span>
    <span class="c">#projectionPoint = lineStart +((point-lineStart)*lineVectorNorm)*lineVectorNorm</span>
    <span class="c">#print ((point - lineStart)*lineVectorUnit)</span>
    <span class="n">reflectionPoint</span> <span class="o">=</span> <span class="n">lineStart</span><span class="o">*</span><span class="mi">2</span> <span class="o">-</span> <span class="n">point</span>  <span class="o">+</span> <span class="p">(</span><span class="n">lineVectorUnit</span><span class="o">*</span><span class="mi">2</span><span class="p">)</span><span class="o">*</span> <span class="p">((</span><span class="n">point</span> <span class="o">-</span> <span class="n">lineStart</span><span class="p">)</span><span class="o">*</span><span class="n">lineVectorUnit</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">reflectionPoint</span>
    </div>
<div class="viewcode-block" id="aNum"><a class="viewcode-back" href="../geom.html#geom.aNum">[docs]</a><span class="k">def</span> <span class="nf">aNum</span><span class="p">(</span><span class="n">theNum</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;used to output fixed decimal string of length 5 (magic number) for SVG output &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="s">&#39;</span><span class="si">%.5f</span><span class="s">&#39;</span><span class="o">%</span> <span class="nb">float</span><span class="p">(</span><span class="n">theNum</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="generateStarDict"><a class="viewcode-back" href="../geom.html#geom.generateStarDict">[docs]</a><span class="k">def</span> <span class="nf">generateStarDict</span><span class="p">(</span><span class="n">limit</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;generate a dictionary representing all possible irregular star polygons&quot;&quot;&quot;</span>

    <span class="n">possibleStars</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="k">for</span> <span class="n">pointKey</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span><span class="n">limit</span><span class="p">):</span>
        <span class="n">stepList</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">step</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="nb">int</span><span class="p">(</span><span class="n">math</span><span class="o">.</span><span class="n">ceil</span><span class="p">(</span><span class="nb">float</span><span class="p">(</span><span class="n">pointKey</span><span class="p">)</span><span class="o">/</span><span class="mi">2</span><span class="p">))):</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">numbthy</span><span class="o">.</span><span class="n">gcd</span><span class="p">(</span><span class="n">pointKey</span><span class="p">,</span> <span class="n">step</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">):</span>
                <span class="n">stepList</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">step</span><span class="p">)</span>
        
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">stepList</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">possibleStars</span><span class="p">[</span><span class="n">pointKey</span><span class="p">]</span> <span class="o">=</span> <span class="n">stepList</span>
    <span class="k">return</span> <span class="n">possibleStars</span>
    </div>
<div class="viewcode-block" id="angalOfPoints"><a class="viewcode-back" href="../geom.html#geom.angalOfPoints">[docs]</a><span class="k">def</span> <span class="nf">angalOfPoints</span><span class="p">(</span><span class="n">pointA</span><span class="p">,</span> <span class="n">pointB</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;calculates the angal of line AB&quot;&quot;&quot;</span>
    <span class="n">diffPoint</span> <span class="o">=</span> <span class="n">pointB</span> <span class="o">-</span> <span class="n">pointA</span>
    <span class="n">rad</span> <span class="o">=</span> <span class="n">math</span><span class="o">.</span><span class="n">atan2</span><span class="p">(</span><span class="n">diffPoint</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="n">diffPoint</span><span class="o">.</span><span class="n">y</span><span class="p">)</span> 
    <span class="k">if</span> <span class="n">rad</span> <span class="o">&gt;=</span> <span class="n">tewpi</span><span class="p">:</span>
        <span class="n">rad</span> <span class="o">=</span> <span class="n">rad</span> <span class="o">-</span> <span class="p">(</span><span class="n">rad</span><span class="o">//</span><span class="n">tewpi</span><span class="p">)</span><span class="o">*</span><span class="n">tewpi</span> 
    <span class="c">#fractionify rad value    </span>
    <span class="n">value</span> <span class="o">=</span> <span class="n">rad</span> <span class="o">/</span> <span class="n">tewpi</span>
    <span class="c">#change direction of increase from counterclockwise to clockwise</span>
    <span class="n">value</span> <span class="o">=</span> <span class="mi">1</span><span class="o">-</span><span class="n">value</span>
    <span class="c">#change starting point 0 from position of 3:00 to 12:00</span>
    <span class="n">value</span> <span class="o">=</span> <span class="n">value</span> <span class="o">+</span> <span class="mf">0.25</span> <span class="o">-</span> <span class="n">value</span><span class="o">//</span><span class="mi">1</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="n">value</span>



<span class="c">#FIXME:use difference between successive iterations to determine when to stop recursing (instead of # of iterations)</span></div>
<div class="viewcode-block" id="cubicBezierLength"><a class="viewcode-back" href="../geom.html#geom.cubicBezierLength">[docs]</a><span class="k">def</span> <span class="nf">cubicBezierLength</span><span class="p">(</span><span class="n">P1</span><span class="p">,</span><span class="n">P2</span><span class="p">,</span><span class="n">P3</span><span class="p">,</span><span class="n">P4</span><span class="p">,</span> <span class="n">maxLev</span><span class="o">=</span><span class="mi">10</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;calculate the length of a cubic bezier start:P1 control1:P2 control2:P3 end:P4 &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="nf">cubicBezierLengthHelp</span><span class="p">(</span><span class="n">P1</span><span class="p">,</span> <span class="n">P2</span><span class="p">,</span> <span class="n">P3</span><span class="p">,</span> <span class="n">P4</span><span class="p">,</span> <span class="n">level</span><span class="o">=</span><span class="mi">1</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">level</span> <span class="o">==</span> <span class="n">maxLev</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">distanceBetween</span><span class="p">(</span><span class="n">P1</span><span class="p">,</span><span class="n">P4</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">L1</span> <span class="o">=</span> <span class="n">P1</span>
            <span class="n">L2</span> <span class="o">=</span> <span class="n">getMidpoint</span><span class="p">(</span><span class="n">P1</span><span class="p">,</span> <span class="n">P2</span><span class="p">)</span>
            <span class="n">H</span>  <span class="o">=</span> <span class="n">getMidpoint</span><span class="p">(</span><span class="n">P2</span><span class="p">,</span> <span class="n">P3</span><span class="p">)</span>
            <span class="n">R3</span> <span class="o">=</span> <span class="n">getMidpoint</span><span class="p">(</span><span class="n">P3</span><span class="p">,</span> <span class="n">P4</span><span class="p">)</span>
            <span class="n">R4</span> <span class="o">=</span> <span class="n">P4</span>
            <span class="n">L3</span> <span class="o">=</span> <span class="n">getMidpoint</span><span class="p">(</span><span class="n">L2</span><span class="p">,</span> <span class="n">H</span><span class="p">)</span>
            <span class="n">R2</span> <span class="o">=</span> <span class="n">getMidpoint</span><span class="p">(</span><span class="n">R3</span><span class="p">,</span> <span class="n">H</span><span class="p">)</span>
            <span class="n">L4</span> <span class="o">=</span> <span class="n">getMidpoint</span><span class="p">(</span><span class="n">L3</span><span class="p">,</span> <span class="n">R2</span><span class="p">)</span>
            <span class="n">R1</span> <span class="o">=</span> <span class="n">L4</span>
        <span class="k">return</span> <span class="n">cubicBezierLengthHelp</span><span class="p">(</span><span class="n">L1</span><span class="p">,</span> <span class="n">L2</span><span class="p">,</span> <span class="n">L3</span><span class="p">,</span> <span class="n">L4</span><span class="p">,</span> <span class="n">level</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span> <span class="o">+</span> <span class="n">cubicBezierLengthHelp</span><span class="p">(</span><span class="n">R1</span><span class="p">,</span> <span class="n">R2</span><span class="p">,</span> <span class="n">R3</span><span class="p">,</span> <span class="n">R4</span><span class="p">,</span> <span class="n">level</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">cubicBezierLengthHelp</span><span class="p">(</span><span class="n">P1</span><span class="p">,</span> <span class="n">P2</span><span class="p">,</span> <span class="n">P3</span><span class="p">,</span> <span class="n">P4</span><span class="p">)</span>
    </div>
<div class="viewcode-block" id="quadradicBezierLength"><a class="viewcode-back" href="../geom.html#geom.quadradicBezierLength">[docs]</a><span class="k">def</span> <span class="nf">quadradicBezierLength</span><span class="p">(</span><span class="n">P1</span><span class="p">,</span><span class="n">P2</span><span class="p">,</span><span class="n">P3</span><span class="p">,</span><span class="n">maxLev</span><span class="o">=</span><span class="mi">10</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;calculate the length of a cubic bezier start:P1 control:P2 end:P3 &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="nf">quadradicBezierLengthHelp</span><span class="p">(</span><span class="n">P1</span><span class="p">,</span> <span class="n">P2</span><span class="p">,</span> <span class="n">P3</span><span class="p">,</span> <span class="n">level</span><span class="o">=</span><span class="mi">1</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">level</span> <span class="o">==</span><span class="n">maxLev</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">distanceBetween</span><span class="p">(</span><span class="n">P1</span><span class="p">,</span><span class="n">P3</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">L1</span> <span class="o">=</span> <span class="n">P1</span>
            <span class="n">L2</span> <span class="o">=</span> <span class="n">getMidpoint</span><span class="p">(</span><span class="n">P1</span><span class="p">,</span> <span class="n">P2</span><span class="p">)</span>
            <span class="n">R3</span> <span class="o">=</span> <span class="n">P3</span>
            <span class="n">R2</span> <span class="o">=</span> <span class="n">getMidpoint</span><span class="p">(</span><span class="n">P2</span><span class="p">,</span> <span class="n">P3</span><span class="p">)</span>
            <span class="n">R1</span> <span class="o">=</span> <span class="n">getMidpoint</span><span class="p">(</span><span class="n">L2</span><span class="p">,</span> <span class="n">P2</span><span class="p">)</span>
            <span class="n">L3</span> <span class="o">=</span> <span class="n">R3</span>
        <span class="k">return</span> <span class="n">quadradicBezierLengthHelp</span><span class="p">(</span><span class="n">L1</span><span class="p">,</span> <span class="n">L2</span><span class="p">,</span> <span class="n">L3</span><span class="p">,</span> <span class="n">level</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span> <span class="o">+</span> <span class="n">quadradicBezierLengthHelp</span><span class="p">(</span><span class="n">R1</span><span class="p">,</span> <span class="n">R2</span><span class="p">,</span> <span class="n">R3</span><span class="p">,</span> <span class="n">level</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">quadradicBezierLengthHelp</span><span class="p">(</span><span class="n">P1</span><span class="p">,</span> <span class="n">P2</span><span class="p">,</span> <span class="n">P3</span><span class="p">)</span>
    </div>
<div class="viewcode-block" id="intersectLineLine"><a class="viewcode-back" href="../geom.html#geom.intersectLineLine">[docs]</a><span class="k">def</span> <span class="nf">intersectLineLine</span><span class="p">(</span><span class="n">a1</span><span class="p">,</span><span class="n">a2</span><span class="p">,</span><span class="n">b1</span><span class="p">,</span><span class="n">b2</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    returns the itersection point for 2 lines if there exists one, calculations ported from Kevin Lindsey&#39;s 2D.js library (switched to Inkscape extensions&#39; summersnight.py algorithm)</span>
<span class="sd">    &quot;&quot;&quot;</span>
<span class="c">##    result = None</span>
<span class="c">##    ua_t=(b2.x-b1.x)*(a1.y-b1.y)-(b2.y-b1.y)*(a1.x-b1.x)</span>
<span class="c">##    ub_t=(a2.x-a1.x)*(a1.y-b1.y)-(a2.y-a1.y)*(a1.x-b1.x)</span>
<span class="c">##    u_b=(b2.y-b1.y)*(a2.x-a1.x)-(b2.x-b1.x)*(a2.y-a1.y)</span>
<span class="c">##    if(u_b!=0):</span>
<span class="c">##        ua=ua_t/u_b</span>
<span class="c">##        ub=ub_t/u_b</span>
<span class="c">##        if(0&lt;=ua and ua&lt;=1 and 0&lt;=ub and ub&lt;=1):</span>
<span class="c">##            result = Point(a1.x+ua*(a2.x-a1.x),a1.y+ua*(a2.y-a1.y))</span>
<span class="c">##    return result</span>
    <span class="n">x1</span> <span class="o">=</span> <span class="n">a1</span><span class="o">.</span><span class="n">x</span>
    <span class="n">x2</span> <span class="o">=</span> <span class="n">a2</span><span class="o">.</span><span class="n">x</span>
    <span class="n">x3</span> <span class="o">=</span> <span class="n">b1</span><span class="o">.</span><span class="n">x</span>
    <span class="n">x4</span> <span class="o">=</span> <span class="n">b2</span><span class="o">.</span><span class="n">x</span>
    
    <span class="n">y1</span> <span class="o">=</span> <span class="n">a1</span><span class="o">.</span><span class="n">y</span>
    <span class="n">y2</span> <span class="o">=</span> <span class="n">a2</span><span class="o">.</span><span class="n">y</span>
    <span class="n">y3</span> <span class="o">=</span> <span class="n">b1</span><span class="o">.</span><span class="n">y</span>
    <span class="n">y4</span> <span class="o">=</span> <span class="n">b2</span><span class="o">.</span><span class="n">y</span>
    
    <span class="n">denom</span> <span class="o">=</span> <span class="p">((</span><span class="n">y4</span> <span class="o">-</span> <span class="n">y3</span><span class="p">)</span> <span class="o">*</span> <span class="p">(</span><span class="n">x2</span> <span class="o">-</span> <span class="n">x1</span><span class="p">))</span> <span class="o">-</span> <span class="p">((</span><span class="n">x4</span> <span class="o">-</span> <span class="n">x3</span><span class="p">)</span> <span class="o">*</span> <span class="p">(</span><span class="n">y2</span> <span class="o">-</span> <span class="n">y1</span><span class="p">))</span>
    <span class="n">num1</span> <span class="o">=</span> <span class="p">((</span><span class="n">x4</span> <span class="o">-</span> <span class="n">x3</span><span class="p">)</span> <span class="o">*</span> <span class="p">(</span><span class="n">y1</span> <span class="o">-</span> <span class="n">y3</span><span class="p">))</span> <span class="o">-</span> <span class="p">((</span><span class="n">y4</span> <span class="o">-</span> <span class="n">y3</span><span class="p">)</span> <span class="o">*</span> <span class="p">(</span><span class="n">x1</span> <span class="o">-</span> <span class="n">x3</span><span class="p">))</span>
    <span class="n">num2</span> <span class="o">=</span> <span class="p">((</span><span class="n">x2</span> <span class="o">-</span> <span class="n">x1</span><span class="p">)</span> <span class="o">*</span> <span class="p">(</span><span class="n">y1</span> <span class="o">-</span> <span class="n">y3</span><span class="p">))</span> <span class="o">-</span> <span class="p">((</span><span class="n">y2</span> <span class="o">-</span> <span class="n">y1</span><span class="p">)</span> <span class="o">*</span> <span class="p">(</span><span class="n">x1</span> <span class="o">-</span> <span class="n">x3</span><span class="p">))</span>
    <span class="n">num</span> <span class="o">=</span> <span class="n">num1</span>
    <span class="k">if</span> <span class="n">denom</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span> 
        <span class="n">x</span> <span class="o">=</span> <span class="n">x1</span> <span class="o">+</span> <span class="p">((</span><span class="n">num</span> <span class="o">/</span> <span class="n">denom</span><span class="p">)</span> <span class="o">*</span> <span class="p">(</span><span class="n">x2</span> <span class="o">-</span> <span class="n">x1</span><span class="p">))</span>
        <span class="n">y</span> <span class="o">=</span> <span class="n">y1</span> <span class="o">+</span> <span class="p">((</span><span class="n">num</span> <span class="o">/</span> <span class="n">denom</span><span class="p">)</span> <span class="o">*</span> <span class="p">(</span><span class="n">y2</span> <span class="o">-</span> <span class="n">y1</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">Point</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">Point</span><span class="p">(</span><span class="n">NaN</span><span class="p">,</span> <span class="n">NaN</span><span class="p">)</span>
    </div>
<span class="k">def</span> <span class="nf">sideLengthToCornerRadius</span><span class="p">(</span><span class="n">sideLength</span><span class="p">,</span> <span class="n">numSides</span><span class="p">):</span>
    <span class="k">return</span> <span class="mi">2</span><span class="o">*</span><span class="n">math</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">math</span><span class="o">.</span><span class="n">pi</span><span class="o">/</span><span class="n">numSides</span><span class="p">)</span><span class="o">/</span><span class="n">sideLength</span>

<span class="k">def</span> <span class="nf">cornerRadiusToSideLength</span><span class="p">(</span><span class="n">radius</span><span class="p">,</span> <span class="n">numSides</span><span class="p">):</span>
    <span class="k">return</span> <span class="mi">2</span><span class="o">*</span><span class="n">math</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">math</span><span class="o">.</span><span class="n">pi</span><span class="o">/</span><span class="n">numSides</span><span class="p">)</span><span class="o">/</span><span class="n">radius</span>

<span class="k">def</span> <span class="nf">cornerRadiusToSideRadius</span><span class="p">(</span><span class="n">cornerRadius</span><span class="p">,</span> <span class="n">sides</span><span class="p">):</span>
    <span class="n">cornerToSideAngal</span> <span class="o">=</span> <span class="mf">0.5</span><span class="o">/</span><span class="nb">float</span><span class="p">(</span><span class="n">sides</span><span class="p">)</span>
    <span class="n">sideRadius</span> <span class="o">=</span> <span class="n">math</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">tewpi</span><span class="o">*</span><span class="n">cornerToSideAngal</span><span class="p">)</span><span class="o">*</span><span class="n">cornerRadius</span>
    <span class="k">return</span> <span class="n">sideRadius</span>
    
<div class="viewcode-block" id="angalBetween"><a class="viewcode-back" href="../geom.html#geom.angalBetween">[docs]</a><span class="k">def</span> <span class="nf">angalBetween</span><span class="p">(</span><span class="n">ptA</span><span class="p">,</span> <span class="n">ptB</span><span class="p">,</span> <span class="n">ptC</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;calculates the angal for angle ABC&quot;&quot;&quot;</span>
    <span class="n">sideAB</span> <span class="o">=</span> <span class="n">distanceBetween</span><span class="p">(</span><span class="n">ptA</span><span class="p">,</span> <span class="n">ptB</span><span class="p">)</span>
    <span class="n">sideBC</span> <span class="o">=</span> <span class="n">distanceBetween</span><span class="p">(</span><span class="n">ptB</span><span class="p">,</span> <span class="n">ptC</span><span class="p">)</span>
    <span class="n">sideCA</span> <span class="o">=</span> <span class="n">distanceBetween</span><span class="p">(</span><span class="n">ptC</span><span class="p">,</span> <span class="n">ptA</span><span class="p">)</span>
    <span class="n">thetaAng</span> <span class="o">=</span> <span class="n">math</span><span class="o">.</span><span class="n">acos</span><span class="p">((</span><span class="n">sideCA</span><span class="o">**</span><span class="mi">2</span><span class="o">-</span><span class="n">sideAB</span><span class="o">**</span><span class="mi">2</span><span class="o">-</span><span class="n">sideBC</span><span class="o">**</span><span class="mi">2</span><span class="p">)</span><span class="o">/</span><span class="p">(</span><span class="o">-</span><span class="mi">2</span><span class="o">*</span><span class="n">sideAB</span><span class="o">*</span><span class="n">sideBC</span><span class="p">))</span>
    <span class="k">return</span> <span class="n">thetaAng</span><span class="o">/</span><span class="n">tewpi</span>
</div>
<div class="viewcode-block" id="getAngalBetween"><a class="viewcode-back" href="../geom.html#geom.getAngalBetween">[docs]</a><span class="k">def</span> <span class="nf">getAngalBetween</span><span class="p">(</span><span class="n">pointA</span><span class="p">,</span> <span class="n">pointB</span><span class="p">,</span> <span class="n">pointC</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Returns the angal defined for ABC (DUPLICATE ?)   &quot;&quot;&quot;</span>
    <span class="n">angBA</span> <span class="o">=</span> <span class="n">angalBetween</span><span class="p">(</span><span class="n">pointB</span><span class="p">,</span> <span class="n">pointA</span><span class="p">)</span>
    <span class="n">angBC</span> <span class="o">=</span> <span class="n">angalBetween</span><span class="p">(</span><span class="n">pointB</span><span class="p">,</span> <span class="n">pointC</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">angAB</span> <span class="o">&lt;</span> <span class="n">angBC</span><span class="p">:</span> <span class="k">return</span> <span class="n">angAB</span> <span class="o">+</span> <span class="n">angBC</span>
    <span class="k">else</span><span class="p">:</span> <span class="k">return</span> <span class="n">angBC</span> <span class="o">-</span> <span class="n">angAB</span>

<span class="c"># the pattern can be best explained with a picture that uses the grid</span>
<span class="c"># note that the angular position is offset such that the first indexed </span>
<span class="c"># point at a given layer will move clockwise as the layer increases</span></div>
<div class="viewcode-block" id="createOffsetRadialGrid"><a class="viewcode-back" href="../geom.html#geom.createOffsetRadialGrid">[docs]</a><span class="k">def</span> <span class="nf">createOffsetRadialGrid</span><span class="p">(</span><span class="n">rings</span><span class="p">,</span> <span class="n">spokes</span><span class="p">,</span> <span class="n">layerSpacing</span><span class="p">,</span> <span class="n">beginRadius</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    creates a radial grid with staggered layers as array containing arrays of Point objects</span>
<span class="sd">    where the returned array is accessed as follows: plots[layer][angle], </span>
<span class="sd">    where increase in layer moves out from center, increase in angle moves clockwise</span>
<span class="sd">    odd layer has point directly above center, even layer does not </span>
<span class="sd">    starting position for angle=0 varies based upon layer, spiraling clockwise</span>
<span class="sd">     &quot;&quot;&quot;</span>
    <span class="n">plots</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">ring</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">rings</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">ring</span> <span class="o">==</span><span class="mi">0</span> <span class="ow">and</span> <span class="nb">float</span><span class="p">(</span><span class="n">beginRadius</span><span class="p">)</span> <span class="o">==</span> <span class="mf">0.0</span><span class="p">:</span>
            <span class="n">plots</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="n">Point</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">)]</span><span class="o">*</span><span class="n">spokes</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">plots</span><span class="o">.</span><span class="n">append</span><span class="p">([])</span>
            <span class="k">for</span> <span class="n">spoke</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">spokes</span><span class="p">):</span>
                <span class="n">plots</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">Point</span><span class="p">()</span><span class="o">.</span><span class="n">polerInit</span><span class="p">(</span><span class="n">ring</span><span class="o">*</span><span class="n">layerSpacing</span><span class="o">+</span><span class="n">beginRadius</span> <span class="p">,</span> <span class="p">(</span><span class="nb">float</span><span class="p">(</span><span class="n">spoke</span><span class="p">)</span><span class="o">/</span><span class="n">spokes</span> <span class="o">+</span> <span class="p">((</span><span class="mf">0.5</span><span class="o">*</span><span class="n">ring</span> <span class="o">%</span> <span class="n">spokes</span><span class="p">)</span><span class="o">/</span><span class="n">spokes</span><span class="p">))))</span>
    <span class="k">return</span> <span class="n">plots</span>
    </div>
<div class="viewcode-block" id="createRadialGrid"><a class="viewcode-back" href="../geom.html#geom.createRadialGrid">[docs]</a><span class="k">def</span> <span class="nf">createRadialGrid</span><span class="p">(</span><span class="n">rings</span><span class="p">,</span> <span class="n">spokes</span><span class="p">,</span> <span class="n">layerSpacing</span><span class="p">,</span> <span class="n">beginRadius</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    creates a radial grid with staggered layers as array containing arrays of Point</span>
<span class="sd">    where returns array is accessed as follows: plots[layer][angle], </span>
<span class="sd">    where increase in layer moves out from center, increase in angle moves clockwise</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">plots</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">ring</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">rings</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">ring</span> <span class="o">==</span><span class="mi">0</span> <span class="ow">and</span> <span class="nb">float</span><span class="p">(</span><span class="n">beginRadius</span><span class="p">)</span> <span class="o">==</span> <span class="mf">0.0</span><span class="p">:</span>
            <span class="n">plots</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="n">Point</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">)]</span><span class="o">*</span><span class="n">spokes</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">plots</span><span class="o">.</span><span class="n">append</span><span class="p">([])</span>
            <span class="k">for</span> <span class="n">spoke</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">spokes</span><span class="p">):</span>
                <span class="n">plots</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">Point</span><span class="p">()</span><span class="o">.</span><span class="n">polerInit</span><span class="p">(</span><span class="n">ring</span><span class="o">*</span><span class="n">layerSpacing</span><span class="o">+</span><span class="n">beginRadius</span> <span class="p">,</span> <span class="p">(</span><span class="nb">float</span><span class="p">(</span><span class="n">spoke</span><span class="p">)</span><span class="o">/</span><span class="n">spokes</span> <span class="p">)))</span>
    <span class="k">return</span> <span class="n">plots</span>
</div>
<div class="viewcode-block" id="createRadialPlots"><a class="viewcode-back" href="../geom.html#geom.createRadialPlots">[docs]</a><span class="k">def</span> <span class="nf">createRadialPlots</span><span class="p">(</span><span class="n">position</span><span class="p">,</span> <span class="n">radius</span><span class="p">,</span> <span class="n">spokes</span><span class="p">,</span> <span class="n">passive</span> <span class="o">=</span> <span class="mi">0</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    returns an array of equidistant points on a circle</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">plots</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">passive</span><span class="p">:</span> <span class="n">offset</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="k">else</span><span class="p">:</span> <span class="n">offset</span> <span class="o">=</span> <span class="mf">1.0</span><span class="o">/</span><span class="p">(</span><span class="mi">2</span><span class="o">*</span><span class="n">spokes</span><span class="p">)</span>
    
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">spokes</span><span class="p">):</span>
        <span class="n">plots</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">Point</span><span class="p">()</span><span class="o">.</span><span class="n">polerInit</span><span class="p">(</span><span class="n">radius</span><span class="p">,</span> <span class="nb">float</span><span class="p">(</span><span class="n">i</span><span class="p">)</span><span class="o">/</span><span class="n">spokes</span> <span class="o">+</span> <span class="n">offset</span><span class="p">)</span> <span class="o">+</span> <span class="n">position</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">plots</span>
</div>
<div class="viewcode-block" id="createTriangularGrid"><a class="viewcode-back" href="../geom.html#geom.createTriangularGrid">[docs]</a><span class="k">def</span> <span class="nf">createTriangularGrid</span><span class="p">(</span><span class="n">startPoint</span><span class="p">,</span> <span class="n">sideLength</span><span class="p">,</span> <span class="n">levels</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    creates a 2D array representing intersections of a triangular grid bound by a triangle</span>
<span class="sd">    first dimension represents height, second dimension represents horizontal position</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">tetractysArray</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">apexArray</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">apexArray</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">startPoint</span><span class="p">)</span>
    <span class="n">tetractysArray</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">apexArray</span><span class="p">)</span>
    
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="n">levels</span><span class="p">):</span>
        <span class="n">tetractysArray</span><span class="o">.</span><span class="n">append</span><span class="p">([])</span>
        
        <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">i</span><span class="p">):</span>
            <span class="n">overarchPoint</span> <span class="o">=</span> <span class="n">tetractysArray</span><span class="p">[</span><span class="o">-</span><span class="mi">2</span><span class="p">][</span><span class="n">j</span><span class="p">]</span>
            <span class="n">leftRef</span> <span class="o">=</span> <span class="n">overarchPoint</span> <span class="o">+</span> <span class="n">Point</span><span class="p">(</span><span class="o">-</span><span class="mi">10</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
            <span class="n">tetractysArray</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">extendBendPoint</span><span class="p">(</span><span class="n">leftRef</span><span class="p">,</span> <span class="n">overarchPoint</span><span class="p">,</span> <span class="n">sideLength</span><span class="p">,</span> <span class="mf">1.0</span><span class="o">/</span><span class="mf">3.0</span><span class="p">))</span>   
            
        <span class="n">tetractysArray</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">extendBendPoint</span><span class="p">(</span> <span class="n">tetractysArray</span><span class="p">[</span><span class="o">-</span><span class="mi">2</span><span class="p">][</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="n">Point</span><span class="p">(</span><span class="o">-</span><span class="mi">10</span> <span class="p">,</span><span class="mi">0</span><span class="p">)</span> <span class="p">,</span><span class="n">tetractysArray</span><span class="p">[</span><span class="o">-</span><span class="mi">2</span><span class="p">][</span><span class="o">-</span><span class="mi">1</span><span class="p">],</span> <span class="n">sideLength</span><span class="p">,</span><span class="mf">1.0</span><span class="o">/</span><span class="mf">6.0</span><span class="p">))</span>
    <span class="k">return</span> <span class="n">tetractysArray</span>
    </div>
<div class="viewcode-block" id="createTriangleCentreGrid"><a class="viewcode-back" href="../geom.html#geom.createTriangleCentreGrid">[docs]</a><span class="k">def</span> <span class="nf">createTriangleCentreGrid</span><span class="p">(</span><span class="n">startPoint</span><span class="p">,</span> <span class="n">sideLength</span><span class="p">,</span> <span class="n">levels</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    creates a 2D array representing centres of triangles in a triangular grid bound by a triangle</span>
<span class="sd">    first dimension represents height second dmension represents horizontal position</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">tetractysArray</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">apexArray</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">apexArray</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">startPoint</span><span class="p">)</span>
    <span class="n">tetractysArray</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">apexArray</span><span class="p">)</span>
    <span class="n">trigridRadius</span> <span class="o">=</span> <span class="n">sideLength</span> <span class="o">/</span>  <span class="p">(</span><span class="n">math</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="mf">1.0</span><span class="o">/</span><span class="mi">3</span><span class="o">*</span><span class="n">tewpi</span><span class="p">)</span><span class="o">*</span><span class="n">math</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="mf">1.0</span><span class="o">/</span><span class="mi">12</span><span class="o">*</span><span class="n">tewpi</span><span class="p">)</span><span class="o">*</span><span class="mf">4.0</span><span class="p">)</span>
    <span class="n">middleToBaseDistance</span> <span class="o">=</span> <span class="n">trigridRadius</span><span class="o">*</span><span class="n">math</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="mf">1.0</span><span class="o">/</span><span class="mi">12</span><span class="o">*</span><span class="n">tewpi</span><span class="p">)</span>
    
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="n">levels</span><span class="p">):</span>
        <span class="n">tetractysArray</span><span class="o">.</span><span class="n">append</span><span class="p">([])</span>
        <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">i</span><span class="p">):</span>
            <span class="n">overarchPoint</span> <span class="o">=</span> <span class="n">tetractysArray</span><span class="p">[</span><span class="o">-</span><span class="mi">2</span><span class="p">][</span><span class="n">j</span><span class="p">]</span>
            <span class="n">leftRef</span> <span class="o">=</span> <span class="n">overarchPoint</span> <span class="o">+</span> <span class="n">Point</span><span class="p">(</span><span class="o">-</span><span class="mi">10</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
            <span class="n">tetractysArray</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">deepcopy</span><span class="p">(</span><span class="n">extendBendPoint</span><span class="p">(</span><span class="n">leftRef</span><span class="p">,</span> <span class="n">overarchPoint</span><span class="p">,</span> <span class="n">sideLength</span><span class="p">,</span> <span class="mf">1.0</span><span class="o">/</span><span class="mf">3.0</span><span class="p">)))</span>   
        <span class="n">tetractysArray</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">deepcopy</span><span class="p">(</span><span class="n">extendBendPoint</span><span class="p">(</span> <span class="n">tetractysArray</span><span class="p">[</span><span class="o">-</span><span class="mi">2</span><span class="p">][</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="n">Point</span><span class="p">(</span><span class="o">-</span><span class="mi">10</span> <span class="p">,</span><span class="mi">0</span><span class="p">)</span> <span class="p">,</span><span class="n">tetractysArray</span><span class="p">[</span><span class="o">-</span><span class="mi">2</span><span class="p">][</span><span class="o">-</span><span class="mi">1</span><span class="p">],</span> <span class="n">sideLength</span><span class="p">,</span><span class="mf">1.0</span><span class="o">/</span><span class="mf">6.0</span><span class="p">)))</span>
        <span class="c">#insert points for upside down triangle centres</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="n">levels</span><span class="p">):</span>
        <span class="n">newInnerArray</span> <span class="o">=</span> <span class="n">deepcopy</span><span class="p">(</span><span class="n">tetractysArray</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>
        <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">):</span>
            <span class="n">midApexPlot</span> <span class="o">=</span> <span class="n">getMidpoint</span><span class="p">(</span><span class="n">tetractysArray</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">j</span><span class="p">],</span> <span class="n">tetractysArray</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">j</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span>
            <span class="n">triangleCentre</span> <span class="o">=</span> <span class="n">extendBendPoint</span><span class="p">(</span><span class="n">tetractysArray</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">j</span><span class="p">],</span> <span class="n">midApexPlot</span><span class="p">,</span> <span class="n">trigridRadius</span><span class="o">-</span><span class="n">middleToBaseDistance</span><span class="p">,</span> <span class="mf">0.25</span><span class="p">)</span>
            <span class="n">newInnerArray</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="mi">2</span><span class="o">*</span><span class="n">j</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="n">deepcopy</span><span class="p">(</span><span class="n">triangleCentre</span><span class="p">))</span>
        <span class="n">tetractysArray</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">newInnerArray</span>
    
    
    <span class="k">return</span> <span class="n">tetractysArray</span>
    </div>
<div class="viewcode-block" id="projectionPointOnLine"><a class="viewcode-back" href="../geom.html#geom.projectionPointOnLine">[docs]</a><span class="k">def</span> <span class="nf">projectionPointOnLine</span><span class="p">(</span><span class="n">pointB</span><span class="p">,</span> <span class="n">lineA</span><span class="p">,</span> <span class="n">lineB</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    returns a point that is the projection of pointB onto line that intersects lineA and lineB</span>
<span class="sd">    &quot;&quot;&quot;</span> 
    <span class="n">lineVector</span> <span class="o">=</span> <span class="n">lineB</span><span class="o">-</span><span class="n">lineA</span>
    <span class="n">bRelative</span> <span class="o">=</span> <span class="n">pointB</span> <span class="o">-</span> <span class="n">lineA</span>
    <span class="n">projRelative</span> <span class="o">=</span> <span class="n">lineVector</span><span class="o">.</span><span class="n">unitVector</span><span class="p">()</span><span class="o">.</span><span class="n">scale</span><span class="p">(</span> <span class="p">((</span><span class="n">lineVector</span><span class="o">*</span><span class="n">bRelative</span><span class="p">)</span><span class="o">/</span><span class="n">lineVector</span><span class="o">.</span><span class="n">vectorLength</span><span class="p">()</span> <span class="p">))</span>
    <span class="k">return</span> <span class="n">lineA</span> <span class="o">+</span> <span class="n">projRelative</span>
 </div>
<div class="viewcode-block" id="perspectiveDistanceRatioArray"><a class="viewcode-back" href="../geom.html#geom.perspectiveDistanceRatioArray">[docs]</a><span class="k">def</span> <span class="nf">perspectiveDistanceRatioArray</span><span class="p">(</span><span class="n">angal</span><span class="p">,</span> <span class="n">divisions</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    In a perspective drawing, things which are equally spaced apart in 3 dimensions, </span>
<span class="sd">    (i.e. mailboxes infront of houses on a road) get closer and closer together</span>
<span class="sd">    this algorithm, given a number of divisions and an angle at which the viewer is looking down, </span>
<span class="sd">    returns an array of ratios that represent how far each successive point is along the line towards the origin</span>
<span class="sd">    see `The Illusion of Depth &lt;http://www.khulsey.com/perspective_basics.html&gt;`_ for an illustration.</span>
<span class="sd">    See in scripts/ platonicEarth.svg for an example of its use</span>
<span class="sd">    &quot;&quot;&quot;</span>  
    <span class="c">#***if angal &gt;= 0.25:</span>
    <span class="c">#***    raise Exception, &quot;angal must be less than 0.25&quot;</span>
    
    <span class="n">origin</span> <span class="o">=</span> <span class="n">Point</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>
    <span class="n">unitLength</span> <span class="o">=</span> <span class="mi">100</span>
    <span class="c">#plot point under origin </span>
    <span class="n">feetPoint</span> <span class="o">=</span> <span class="n">origin</span> <span class="o">-</span> <span class="n">Point</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">unitLength</span><span class="p">)</span>
    <span class="n">vanishingDistance</span> <span class="o">=</span> <span class="n">unitLength</span><span class="o">/</span><span class="n">math</span><span class="o">.</span><span class="n">tan</span><span class="p">(</span><span class="n">angal</span><span class="o">*</span><span class="n">tewpi</span><span class="p">)</span>
    <span class="n">vanishingPoint</span> <span class="o">=</span> <span class="n">extendBendPoint</span><span class="p">(</span><span class="n">origin</span><span class="p">,</span> <span class="n">feetPoint</span><span class="p">,</span>  <span class="n">vanishingDistance</span><span class="p">,</span> <span class="mf">0.75</span><span class="p">)</span>
    <span class="n">vanishingPointEyelevel</span> <span class="o">=</span> <span class="n">origin</span> <span class="o">+</span> <span class="n">Point</span><span class="p">(</span><span class="n">vanishingDistance</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
    <span class="n">baseDivisions</span> <span class="o">=</span> <span class="n">getLineDivisions</span><span class="p">(</span><span class="n">feetPoint</span><span class="p">,</span> <span class="n">vanishingPoint</span><span class="p">,</span> <span class="n">divisions</span><span class="p">)</span>
    <span class="n">sideIntersections</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">divisions</span><span class="p">):</span>
        <span class="n">sideIntersections</span><span class="o">.</span><span class="n">append</span><span class="p">(</span> <span class="n">intersectLineLine</span><span class="p">(</span><span class="n">feetPoint</span><span class="p">,</span> <span class="n">vanishingPointEyelevel</span><span class="p">,</span> <span class="n">baseDivisions</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">origin</span><span class="p">))</span>
    <span class="n">perspectiveDistanceLength</span> <span class="o">=</span> <span class="n">distanceBetween</span><span class="p">(</span><span class="n">feetPoint</span><span class="p">,</span> <span class="n">sideIntersections</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span>
    <span class="n">ratios</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">divisions</span><span class="p">):</span>
        <span class="n">ratios</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">distanceBetween</span><span class="p">(</span><span class="n">feetPoint</span><span class="p">,</span> <span class="n">sideIntersections</span><span class="p">[</span><span class="n">i</span><span class="p">])</span><span class="o">/</span><span class="n">perspectiveDistanceLength</span><span class="p">)</span>
    
    <span class="k">return</span> <span class="n">ratios</span>
    



<span class="c">#FIXME:used ?</span></div>
<span class="k">def</span> <span class="nf">vertFlipThayda</span><span class="p">(</span><span class="n">number</span><span class="p">):</span>
        <span class="k">return</span> <span class="mi">1</span> <span class="o">-</span> <span class="n">number</span>

<span class="c">#FIXME:used ?</span>
<span class="k">def</span> <span class="nf">horizFlipThayda</span><span class="p">(</span><span class="n">number</span><span class="p">):</span>
    <span class="n">retVal</span> <span class="o">=</span> <span class="mf">0.5</span> <span class="o">-</span> <span class="n">number</span>
    <span class="k">if</span> <span class="n">retVal</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="p">:</span>
        <span class="n">retVal</span> <span class="o">=</span> <span class="n">retVal</span> <span class="o">+</span> <span class="mi">1</span> 
    
    <span class="k">return</span> <span class="n">retVal</span>

<span class="c">#FIXME:used ?</span>
<span class="k">def</span> <span class="nf">convertTanToFract</span><span class="p">(</span><span class="n">number</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">number</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="p">:</span>
        <span class="n">retVal</span> <span class="o">=</span> <span class="mi">1</span><span class="o">+</span><span class="n">number</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">retVal</span> <span class="o">=</span> <span class="n">number</span>
        
    <span class="k">return</span> <span class="n">retVal</span>

<span class="c">#FIXME:used ?</span>
<span class="k">def</span> <span class="nf">radialPlot</span><span class="p">(</span><span class="n">angleFraction</span><span class="p">,</span> <span class="n">radius</span><span class="p">):</span>
    <span class="n">givenAngleFraction</span> <span class="o">=</span> <span class="n">angleFraction</span>
    <span class="k">if</span> <span class="n">givenAngleFraction</span> <span class="o">&gt;=</span> <span class="mi">1</span><span class="p">:</span>
        <span class="n">givenAngleFraction</span> <span class="o">=</span> <span class="n">angleFraction</span> <span class="o">-</span> <span class="n">math</span><span class="o">.</span><span class="n">floor</span><span class="p">(</span><span class="n">angleFraction</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">Point</span><span class="p">(</span><span class="n">math</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">givenAngleFraction</span><span class="o">*</span><span class="n">tewpi</span><span class="p">)</span><span class="o">*</span><span class="n">radius</span> <span class="p">,</span> <span class="n">math</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">givenAngleFraction</span><span class="o">*</span><span class="n">tewpi</span><span class="p">)</span><span class="o">*</span><span class="n">radius</span><span class="p">)</span>  




<span class="c">##</span>
<span class="c">##def hingePlot(pointA, pointB,  length, angle):</span>
<span class="c">##    &quot;&quot;&quot;returns a point that is a plot as described in using a compas metaphor: a compas is open \</span>
<span class="c">##     by the distance of hingRadius with end #1 fixed on axisPoint and end #2 \</span>
<span class="c">##     resting such that it is in line with axisPoint and baselinePoint.  The returned point is the point \</span>
<span class="c">##    obtained by swinging end #2 by the angal angleFraction &quot;&quot;&quot;</span>
<span class="c">##    relativeB = pointB - pointA</span>
<span class="c">##    print relativeB</span>
<span class="c">##    print relativeB.convertToPoler().getT()</span>
<span class="c">##    hingePoint =  PolerPoint(length, relativeB.convertToPoler().getT()+angle).convertToCartesian() + pointA</span>
<span class="c">##    return hingePoint</span>


<span class="c">##def hingePlot(axisPoint,baselinePoint, angleFraction, hingeRadius):</span>
<span class="c">##    &quot;&quot;&quot;returns a point that is a plot as described in using a compas metaphor: a compas is open </span>
<span class="c">##     by the distance of hingRadius with end #1 fixed on axisPoint and end #2 </span>
<span class="c">##     resting such that it is in line with axisPoint and baselinePoint.  The returned point is the point </span>
<span class="c">##    obtained by swinging end #2 by the angal angleFraction &quot;&quot;&quot;</span>
<span class="c">##    #determine the existing angle between axisPoint and baselinePoint</span>
<span class="c">##    existingAngle = math.atan2( axisPoint.y-baselinePoint.y, axisPoint.x-baselinePoint.x ) / tewpi</span>
<span class="c">##    existingAngle = convertTanToFract(existingAngle)</span>
<span class="c">##    print str(existingAngle)</span>
<span class="c">##    #use radialPlot to make hinge</span>
<span class="c">##    plot = axisPoint + radialPlot(existingAngle+angleFraction, hingeRadius)</span>
<span class="c">##    return plot</span>
<span class="c">##    </span>
</pre></div>

          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li><a href="../index.html">pLAySVG 0.3.1 documentation</a> &raquo;</li>
          <li><a href="index.html" >Module code</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2013, Cosmo Guffa.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.1.3.
    </div>
  </body>
</html>